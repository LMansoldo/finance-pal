const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-BVY340GN.js","assets/messages-ItMM0fIM.js","assets/vendor-XtUg-c2N.js","assets/RegisterPage-hM4YaQS7.js","assets/HomePage-C4NZSaDk.js","assets/financialRepository-DohCN_Ha.js","assets/DetailPage-CygGveAD.js"])))=>i.map(i=>d[i]);
import{r as I,a as L,b as d,N as O,B as C,R as D,c as g}from"./vendor-XtUg-c2N.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}})();var v={exports:{}},y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S;function J(){if(S)return y;S=1;var t=I(),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,s,x){var u,i={},m=null,p=null;x!==void 0&&(m=""+x),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(p=s.ref);for(u in s)f.call(s,u)&&!a.hasOwnProperty(u)&&(i[u]=s[u]);if(c&&c.defaultProps)for(u in s=c.defaultProps,s)i[u]===void 0&&(i[u]=s[u]);return{$$typeof:n,type:c,key:m,ref:p,props:i,_owner:r.current}}return y.Fragment=l,y.jsx=o,y.jsxs=o,y}var R;function q(){return R||(R=1,v.exports=J()),v.exports}var e=q(),j={},b;function U(){if(b)return j;b=1;var t=L();return j.createRoot=t.createRoot,j.hydrateRoot=t.hydrateRoot,j}var k=U();const F="modulepreload",T=function(t){return"/finance-pal/"+t},E={},_=function(n,l,f){let r=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(l.map(s=>{if(s=T(s),s in E)return;E[s]=!0;const x=s.endsWith(".css"),u=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${u}`))return;const i=document.createElement("link");if(i.rel=x?"stylesheet":F,x||(i.as="script"),i.crossOrigin="",i.href=s,c&&i.setAttribute("nonce",c),document.head.appendChild(i),x)return new Promise((m,p)=>{i.addEventListener("load",m),i.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return r.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return n().catch(a)})},h={login(t,n){const f=JSON.parse(localStorage.getItem("users")||"[]").find(r=>r.email===t&&r.password===n);if(f){const r={user:f,token:`token-${Date.now()}`,expiresAt:Date.now()+36e5};return localStorage.setItem("session",JSON.stringify(r)),f}return null},register(t){const n=JSON.parse(localStorage.getItem("users")||"[]");return n.push(t),localStorage.setItem("users",JSON.stringify(n)),t},logout(){localStorage.removeItem("session")},isAuthenticated(){const t=JSON.parse(localStorage.getItem("session")||"null");return t?t.expiresAt<Date.now()?(this.logout(),!1):!0:!1},refreshSession(){const t=JSON.parse(localStorage.getItem("session")||"null");t&&(t.expiresAt=Date.now()+36e5,localStorage.setItem("session",JSON.stringify(t)))},getCurrentUser(){const t=JSON.parse(localStorage.getItem("session")||"null");return(t==null?void 0:t.user)||null}},P=d.createContext({}),$=({children:t})=>{const[n,l]=d.useState(null),[f,r]=d.useState(!1),[a,o]=d.useState(!0),c=()=>{if(!h.isAuthenticated())l(null),r(!1);else{const m=h.getCurrentUser();l(m),r(!0),h.refreshSession()}};d.useEffect(()=>{c(),o(!1);const i=setInterval(()=>{c()},6e4);return()=>clearInterval(i)},[]);const s=(i,m)=>{const p=h.login(i,m);return p?(l(p),r(!0),!0):!1},x=i=>{try{return h.register(i),!0}catch(m){return console.error("Erro ao registrar usuário:",m),!1}},u=()=>{h.logout(),l(null),r(!1)};return e.jsx(P.Provider,{value:{user:n,isAuthenticated:f,loading:a,login:s,register:x,logout:u},children:t})},A=()=>d.useContext(P),B=({title:t})=>{const{user:n,logout:l}=A();return e.jsx("header",{className:"bg-gradient-to-l bg-secondary-1000 shadow border-solid border-b-emerald-100 ",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-primary-500",children:t})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"mr-4 text-primary-100",children:["Olá, ",n==null?void 0:n.firstName]}),e.jsx("button",{onClick:l,className:" text-primary-400 font-bold py-1 px-3 text-sm",children:"Logout"})]})]})})},z=()=>{const t=new Date().getFullYear();return e.jsx("footer",{className:"bg-secondary-900 border-t border-secondary-700 py-4 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center text-secondary-200 text-sm",children:["© ",t," Finance Pal. Todos os direitos reservados."]})})},w=()=>e.jsx("div",{className:"flex items-center justify-center ",children:e.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}),N=({children:t})=>{const{isAuthenticated:n,loading:l}=A();return l?e.jsx(w,{}):n?e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Finance Pal"}),t,e.jsx(z,{})]}):e.jsx(O,{to:"/login",replace:!0})},V=d.lazy(()=>_(()=>import("./LoginPage-BVY340GN.js"),__vite__mapDeps([0,1,2]))),Y=d.lazy(()=>_(()=>import("./RegisterPage-hM4YaQS7.js"),__vite__mapDeps([3,1,2]))),H=d.lazy(()=>_(()=>import("./HomePage-C4NZSaDk.js"),__vite__mapDeps([4,2,5]))),W=d.lazy(()=>_(()=>import("./DetailPage-CygGveAD.js"),__vite__mapDeps([6,5,2]))),K=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-900",children:e.jsx("div",{className:"text-xl text-secondary-600",children:e.jsx(w,{})})}),G=()=>e.jsx($,{children:e.jsx(C,{children:e.jsx(d.Suspense,{fallback:e.jsx(K,{}),children:e.jsxs(D,{children:[e.jsx(g,{path:"/login",element:e.jsx(V,{})}),e.jsx(g,{path:"/register",element:e.jsx(Y,{})}),e.jsx(g,{path:"/",element:e.jsx(N,{children:e.jsx(H,{})})}),e.jsx(g,{path:"/detail/:id",element:e.jsx(N,{children:e.jsx(W,{})})}),e.jsx(g,{path:"*",element:e.jsx(O,{to:"/",replace:!0})})]})})})});k.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(G,{})}));export{w as L,e as j,A as u};
//# sourceMappingURL=index-zF6Hmcwz.js.map
