var P=Object.defineProperty;var I=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=(e,t,r)=>I(e,typeof t!="symbol"?t+"":t,r);import{j as c,M as j}from"./index-C_mE_UBq.js";import{b,d as i,l as D}from"./vendor-vz8ujiOm.js";const O=b.createContext({striped:!1,hoverable:!1}),l=({children:e,striped:t=!1,hoverable:r=!1,className:n=""})=>c.jsx(O.Provider,{value:{striped:t,hoverable:r},children:c.jsx("div",{className:`overflow-hidden shadow ring-1 ring-secondary-700 ring-opacity-5 sm:rounded-lg ${n}`,children:c.jsx("table",{className:"min-w-full divide-y divide-secondary-700",children:e})})}),$=({children:e,className:t=""})=>c.jsx("thead",{className:`bg-secondary-800 ${t}`,children:e}),T=({children:e,className:t=""})=>{const{striped:r}=b.useContext(O);return c.jsx("tbody",{className:`divide-y divide-secondary-800 bg-secondary-800 ${t}`,children:i.Children.map(e,(n,s)=>i.isValidElement(n)?i.cloneElement(n,{...n.props,isEven:r&&s%2===0}):n)})},A=({children:e,className:t="",isEven:r=!1})=>{const{hoverable:n}=b.useContext(O);return c.jsx("tr",{className:`
      ${r?"bg-secondary-700":""}
      ${n?"hover:bg-secondary-600 transition-colors":""}
      ${t}
    `,children:e})},B=({children:e,className:t="",align:r="left"})=>{const n={left:"text-left",center:"text-center",right:"text-right"};return c.jsx("th",{scope:"col",className:`px-6 py-3 text-xs font-medium uppercase tracking-wider text-secondary-100 ${n[r]} ${t}`,children:e})},U=({children:e,className:t="text-secondary-100",align:r="left",colSpan:n})=>{const s={left:"text-left",center:"text-center",right:"text-right"};return c.jsx("td",{className:`whitespace-nowrap px-6 py-4 text-sm ${s[r]} ${t}`,colSpan:n,children:e})};l.Head=$;l.Body=T;l.Row=A;l.HeaderCell=B;l.Cell=U;const f={CURRENCY:"currency",STOCK:"stock",BITCOIN:"bitcoin"},H={[f.CURRENCY]:"Moeda",[f.STOCK]:"Ação",[f.BITCOIN]:"Cripto"},le=({type:e})=>c.jsx(l.Cell,{children:H[e]}),_=(e="USD",t=0)=>{const r=F(t)/100,s={USD:{locale:"en-US",currency:"USD",symbol:"$"},BRL:{locale:"pt-BR",currency:"BRL",symbol:"R$"},EUR:{locale:"de-DE",currency:"EUR",symbol:"€"},GBP:{locale:"en-GB",currency:"GBP",symbol:"£"},JPY:{locale:"ja-JP",currency:"JPY",symbol:"¥"},CNY:{locale:"zh-CN",currency:"CNY",symbol:"¥"},AUD:{locale:"en-AU",currency:"AUD",symbol:"A$"},CAD:{locale:"en-CA",currency:"CAD",symbol:"C$"},CHF:{locale:"de-CH",currency:"CHF",symbol:"CHF"},INR:{locale:"en-IN",currency:"INR",symbol:"₹"}}[e]||{locale:"en-US",currency:e};try{return new Intl.NumberFormat(s.locale,{style:"currency",currency:s.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}catch(o){return console.error(`${j.FORMAT_CURRENCY_ERROR} ${e}: ${o}`),`${s.symbol||e} ${r.toFixed(2)}`}},ue=e=>({USD:"$",BRL:"R$",EUR:"€",GBP:"£",JPY:"¥",CNY:"¥",AUD:"A$",CAD:"C$",CHF:"CHF",INR:"₹"})[e]||e,F=e=>Math.round(e*100),Q=(e=0,t="en-US")=>{let r=2;return e>=1e3||e>=100?r=2:e>=10?r=3:r=4,new Intl.NumberFormat(t,{minimumFractionDigits:r,maximumFractionDigits:r}).format(e)},me=({type:e,source:t,buy:r,points:n})=>c.jsx(l.Cell,{children:e!==f.STOCK?`${_(t,r)||"-"}`:Q(n)||"-"}),ye=({variation:e})=>{const t=r=>r>0?"text-green-500":r<0?"text-red-500":"text-secondary-300";return c.jsxs(l.Cell,{className:t(e),children:[e.toFixed(2),"%"]})};var R={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x=i.createContext&&i.createContext(R),Y=["attr","size","title"];function M(e,t){if(e==null)return{};var r=K(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function K(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(n){L(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L(e,t,r){return t=J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=W(e,"string");return typeof t=="symbol"?t:t+""}function W(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S(e){return e&&e.map((t,r)=>i.createElement(t.tag,C({key:r},t.attr),S(t.child)))}function E(e){return t=>i.createElement(z,g({attr:C({},e.attr)},t),S(e.child))}function z(e){var t=r=>{var{attr:n,size:s,title:o}=e,a=M(e,Y),m=s||r.size||"1em",u;return r.className&&(u=r.className),e.className&&(u=(u?u+" ":"")+e.className),i.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:u,style:C(C({color:e.color||r.color},r.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&i.createElement("title",null,o),e.children)};return x!==void 0?i.createElement(x.Consumer,null,r=>t(r)):t(R)}function de(e){return E({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"},child:[]}]})(e)}function pe(e){return E({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"},child:[]}]})(e)}const G=3*60*1e3;class V{constructor(){v(this,"cache",new Map)}get(t){const r=this.cache.get(t);return r?Date.now()-r.timestamp>G?(this.cache.delete(t),null):r.data:null}set(t,r){this.cache.set(t,{data:r,timestamp:Date.now()})}getExpired(t){const r=this.cache.get(t);return r?r.data:null}clear(t){t?this.cache.delete(t):this.cache.clear()}}const y=new V,k="8073a3d2",X=e=>{const t=D.create({baseURL:e,headers:{"Content-Type":"application/json"}});return t.interceptors.response.use(r=>r,r=>Promise.reject(r)),t},d=(e,t)=>t?`${e}?format=json-cors&key=${t}`:e,p=e=>{var t;throw console.error(((t=e.response)==null?void 0:t.data)||e.message),e},Z=(e,t=k)=>{const r=X(e);return{async get(n,s){try{const o=d(n,t);return(await r.get(o,s)).data}catch(o){return p(o)}},async post(n,s,o){try{const a=d(n,t);return(await r.post(a,s,o)).data}catch(a){return p(a)}},async put(n,s,o){try{const a=d(n,t);return(await r.put(a,s,o)).data}catch(a){return p(a)}},async delete(n,s){try{const o=d(n,t);return(await r.delete(o,s)).data}catch(o){return p(o)}}}},q=Z("https://api.hgbrasil.com"),ee={getQuotations:()=>"/finance"};class te{async fetchQuotations(){return await q.get(ee.getQuotations())}}const re=new te;class ne{saveQuotationHistory(t){const r=new Date,n=JSON.parse(localStorage.getItem(`history_${t.id}`)||"[]");n.push({...t,timestamp:r.getTime()}),localStorage.setItem(`history_${t.id}`,JSON.stringify(n))}getQuotationHistory(t){return JSON.parse(localStorage.getItem(`history_${t}`)||"[]")}}const N=new ne;var h=(e=>(e.CURRENCY="currency",e.STOCK="stock",e.BITCOIN="bitcoin",e))(h||{});class se{mapResponseToFinancialData(t){const r=t.results,{source:n="USD"}=r.currencies||{},s=this.mapCurrencies(r.currencies||{},n.toString()),o=this.mapStocks(r.stocks||{}),a=this.mapBitcoin(r.bitcoin||{},n.toString());return[...s,...o,...a]}mapCurrencies(t,r){return Object.entries(t).filter(([n])=>n!=="source").map(([n,s])=>({id:n,source:r,name:s.name,buy:s.buy,sell:s.sell,variation:s.variation,type:h.CURRENCY})).slice(0,3)}mapStocks(t){return Object.entries(t).map(([r,n])=>({id:r,name:n.name,location:n.location,points:n.points,variation:n.variation,type:h.STOCK})).slice(0,3)}mapBitcoin(t,r){return Object.entries(t).map(([n,s])=>({id:n,name:s.name,source:r,buy:s.buy,sell:s.sell,variation:s.variation,type:h.BITCOIN})).slice(0,4)}}const oe=new se,fe={async getQuotations(){const e="quotations";try{const t=y.get(e);if(t)return t;const r=await re.fetchQuotations(),n=oe.mapResponseToFinancialData(r);return y.set(e,n),n}catch(t){console.error(`${j.QUOTATION_ERROR}`,t);const r=y.getExpired(e);return r||[]}},clearCache(e){y.clear(e)},saveQuotationHistory(e){N.saveQuotationHistory(e)},getQuotationHistory(e){return N.getQuotationHistory(e)}};export{pe as B,h as F,H as Q,l as T,me as V,le as a,ye as b,f as c,Q as d,fe as e,_ as f,ue as g,de as h};
