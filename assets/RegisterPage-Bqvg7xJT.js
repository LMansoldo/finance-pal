import{r as f,u as E,a as b,j as s,L as j}from"./index-rC7JtJMw.js";import{z as m,M as r,T as c,B as w}from"./index-BiiawU7C.js";const v=m.object({firstName:m.string().min(1,{message:r.FIRST_NAME_REQUIRED}).min(2,{message:r.FIRST_NAME_TOO_SHORT}),lastName:m.string().min(1,{message:r.LAST_NAME_REQUIRED}).min(2,{message:r.LAST_NAME_TOO_SHORT}),email:m.string().min(1,{message:r.EMAIL_REQUIRED}).email({message:r.INVALID_EMAIL_FORMAT}),password:m.string().min(1,{message:r.PASSWORD_REQUIRED}).min(6,{message:r.PASSWORD_TOO_SHORT}),confirmPassword:m.string().min(1,{message:r.CONFIRM_PASSWORD_REQUIRED})}).refine(e=>e.password===e.confirmPassword,{message:r.PASSWORD_MISMATCH,path:["confirmPassword"]}),_=e=>{try{return v.parse(e),{success:!0,errors:null}}catch(a){return a instanceof m.ZodError?{success:!1,errors:a.errors.reduce((o,t)=>{const i=t.path[0];return o[i]=t.message,o},{})}:{success:!1,errors:{form:r.GENERAL_ERROR}}}},O=()=>{const[e,a]=f.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[l,o]=f.useState({}),[t,i]=f.useState(""),[N,d]=f.useState(!1),{register:R}=E(),p=b();return{formData:e,errors:l,generalError:t,isSubmitting:N,handleChange:g=>{const{id:n,value:h}=g.target;a(u=>({...u,[n]:h})),l[n]&&o(u=>({...u,[n]:""})),t&&i("")},handleSubmit:async g=>{g.preventDefault(),i(""),d(!0);try{const n=_(e);if(!n.success){o(n.errors),d(!1);return}if(JSON.parse(localStorage.getItem("users")||"[]").some(x=>x.email===e.email)){i(r.USER_EXISTS),d(!1);return}const S=`${e.firstName} ${e.lastName}`.trim();R({id:Date.now().toString(),name:S,firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password})?p("/login"):i(r.REGISTER_ERROR)}catch(n){i(r.GENERAL_ERROR),console.error("Register error:",n)}finally{d(!1)}},resetForm:()=>{a({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),o({}),i("")}}},y=()=>{const{formData:e,errors:a,generalError:l,isSubmitting:o,handleChange:t,handleSubmit:i}=O();return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-900",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[l&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),s.jsxs("form",{onSubmit:i,children:[s.jsx("div",{className:"mb-4",children:s.jsx(c,{type:"text",id:"firstName",value:e.firstName,onChange:t,placeholder:"Seu primeiro nome",label:"Nome",error:a.firstName})}),s.jsx("div",{className:"mb-4",children:s.jsx(c,{type:"text",id:"lastName",value:e.lastName,onChange:t,placeholder:"Seu sobrenome",label:"Sobrenome",error:a.lastName})}),s.jsx("div",{className:"mb-4",children:s.jsx(c,{type:"email",id:"email",value:e.email,onChange:t,placeholder:"seu@email.com",label:"Email",error:a.email})}),s.jsx("div",{className:"mb-4",children:s.jsx(c,{type:"password",id:"password",value:e.password,onChange:t,placeholder:"********",label:"Senha",error:a.password})}),s.jsx("div",{className:"mb-6",children:s.jsx(c,{type:"password",id:"confirmPassword",value:e.confirmPassword,onChange:t,placeholder:"********",label:"Confirmar Senha",error:a.confirmPassword})}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(w,{type:"submit",variant:"primary",fullWidth:!0,disabled:o,children:o?"Cadastrando...":"Cadastrar"})}),s.jsx("div",{className:"text-center mt-4",children:s.jsxs("p",{className:"text-sm text-secondary-600",children:["Já tem uma conta?"," ",s.jsx(j,{to:"/login",className:"text-primary-500 hover:text-primary-700",children:"Faça login"})]})})]})]})})},M=()=>s.jsx(y,{});export{M as default};
