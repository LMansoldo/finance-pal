import{j as e,M as u}from"./index-C_mE_UBq.js";import{L as y,b as d,d as b}from"./vendor-vz8ujiOm.js";import{T as t,B as g,a as w,V as v,b as C,Q as T,c as j,f as p,d as A,e as f}from"./financialRepository-B7d_6N1-.js";const R=({name:s})=>e.jsx(t.Cell,{children:e.jsx("div",{className:"font-medium",children:s})}),E=({id:s})=>e.jsx(t.Cell,{children:e.jsxs(y,{to:`/detail/${s}`,className:"text-blue-400 hover:text-blue-300 text-sm font-medium flex items-center",children:["Ver detalhes",e.jsx(g,{className:"ml-1"})]})}),V=[{id:"name",label:"Nome"},{id:"type",label:"Tipo"},{id:"value",label:"Valor"},{id:"variation",label:"Variação"},{id:"actions",label:"Ações"}],x=({width:s="100%",height:r="1.25rem",borderRadius:l="0.25rem",className:a=""})=>{const n=typeof s=="number"?`${s}px`:s,c=typeof r=="number"?`${r}px`:r;return e.jsx("div",{className:`bg-secondary-500 animate-pulse ${a}`,style:{width:n,height:c,borderRadius:l}})},F=({quotations:s,loading:r,error:l})=>e.jsxs(t,{striped:!0,hoverable:!0,children:[e.jsx(t.Head,{children:e.jsx(t.Row,{children:V.map(a=>e.jsx(t.HeaderCell,{children:a.label},a.id))})}),e.jsxs(t.Body,{children:[r&&e.jsx(e.Fragment,{children:[...Array(10)].map((a,n)=>e.jsx(t.Row,{children:e.jsx(t.Cell,{colSpan:5,children:e.jsx(x,{})})},`${a}-${n}`))}),l&&e.jsx(t.Row,{children:e.jsx(t.Cell,{colSpan:5,children:u.ERROR_LOADING_DATA})}),s.length===0&&!l&&!r&&e.jsx(t.Row,{children:e.jsx(t.Cell,{colSpan:5,children:u.DATA_NOT_FOUND})}),s.map(a=>e.jsxs(t.Row,{children:[e.jsx(R,{name:a.name}),e.jsx(w,{type:a.type}),e.jsx(v,{type:a.type,buy:a.buy,points:a.points,source:a.source}),e.jsx(C,{variation:a.variation}),e.jsx(E,{id:a.id})]},a.id))]})]}),I=({name:s,type:r})=>e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-100 truncate",children:s}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-secondary-500 text-secondary-200",children:T[r]||r})]}),h=({label:s,value:r,className:l="text-secondary-100"})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-secondary-200",children:[s,":"]}),e.jsx("span",{className:`text-base font-medium ${l}`,children:r})]}),L=({variation:s})=>{const r=l=>l?l>0?"text-green-600":l<0?"text-red-600":"text-secondary-600":"text-secondary-100";return e.jsx(h,{label:"Variação",value:s!==void 0?`${s>0?"+":""}${s.toFixed(2)}%`:"-",className:r(s)})},O=({quotation:s})=>{const r=l=>l.type!==j.STOCK?l.buy?p(l.source,l.buy):"-":l.points?A(l.points):"-";return e.jsxs("div",{className:"flex-grow space-y-2",children:[e.jsx(h,{label:"Valor",value:r(s)}),(s.type===j.CURRENCY||s.type===j.BITCOIN)&&e.jsx(h,{label:"Venda",value:s.sell?p(s.source,s.sell):"-"}),s.type===j.STOCK&&s.location&&e.jsx(h,{label:"Local",value:s.location}),e.jsx(L,{variation:s.variation})]})},S=({id:s})=>e.jsx("div",{className:"mt-4 pt-3 border-t border-secondary-700 flex justify-end",children:e.jsxs(y,{to:`/detail/${s}`,className:"text-primary-400 hover:text-primary-300 text-sm font-medium flex items-center",children:["Ver detalhes",e.jsx(g,{className:"ml-1"})]})}),_=s=>r=>e.jsx("div",{className:"bg-secondary-800 rounded-lg shadow-md p-4 flex flex-col h-full border border-secondary-600 hover:border-secondary-500 transition-colors",children:e.jsx(s,{...r})}),D=({quotation:s})=>e.jsxs(e.Fragment,{children:[e.jsx(I,{name:s.name,type:s.type}),e.jsx(O,{quotation:s}),e.jsx(S,{id:s.id})]}),$=_(D),B=({quotations:s,loading:r,error:l})=>r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 w-full",children:Array.from({length:6}).map((a,n)=>e.jsxs("div",{className:"p-4 bg-secondary-800 rounded shadow w-full",children:[e.jsx(x,{height:"150px",className:"mb-4"}),e.jsx(x,{height:"20px",width:"60%"}),e.jsx(x,{height:"20px",width:"80%"}),e.jsx(x,{height:"20px",width:"40%"})]},n))}):l?e.jsx("div",{className:"text-center mt-4",children:u.DATA_NOT_FOUND}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 w-full",children:s.map(a=>e.jsx($,{quotation:a},a.id))}),H=()=>{const[s,r]=d.useState(!1),[l,a]=d.useState([]),[n,c]=d.useState(null),i=d.useRef(null),o=async()=>{r(!0),c(null);try{const m=await f.getQuotations();a(m),m.forEach(N=>{f.saveQuotationHistory(N)})}catch(m){c(m)}finally{r(!1)}};return d.useEffect(()=>(o(),i.current=setInterval(o,3e5),()=>{i.current&&clearInterval(i.current)}),[]),{loading:s,quotations:l,error:n}},Q=b.memo(({loading:s,quotations:r,error:l})=>e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(B,{quotations:r,loading:s,error:l})})),M=b.memo(({loading:s,quotations:r,error:l})=>e.jsx("div",{className:"bg-white shadow overflow-x sm:rounded-lg mb-6",children:e.jsx(F,{quotations:r,loading:s,error:l})})),k=()=>{const{loading:s,quotations:r,error:l}=H(),[a,n]=d.useState(!1);return d.useLayoutEffect(()=>{const c=()=>{n(window.innerWidth<1024)};c();let i;const o=()=>{clearTimeout(i),i=window.setTimeout(c,100)};return window.addEventListener("resize",o),()=>{clearTimeout(i),window.removeEventListener("resize",o)}},[]),e.jsx("div",{className:"min-h-screen bg-secondary-900",children:e.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:a?e.jsx(Q,{quotations:r,loading:s,error:l}):e.jsx(M,{quotations:r,loading:s,error:l})})})},Y=()=>e.jsx(k,{});export{Y as default};
