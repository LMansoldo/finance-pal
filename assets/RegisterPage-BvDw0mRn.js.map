{"version":3,"file":"RegisterPage-BvDw0mRn.js","sources":["../../src/modules/auth/config/register.config.ts","../../src/modules/auth/hooks/useRegisterForm.ts","../../src/modules/auth/views/RegisterView.tsx","../../src/pages/register/RegisterPage.tsx"],"sourcesContent":["import { z } from 'zod';\nimport { Messages } from '@shared/constants/messages';\n\nexport const registerSchema = z.object({\n  firstName: z\n    .string()\n    .min(1, { message: Messages.FIRST_NAME_REQUIRED })\n    .min(2, { message: Messages.FIRST_NAME_TOO_SHORT }),\n  lastName: z\n    .string()\n    .min(1, { message: Messages.LAST_NAME_REQUIRED })\n    .min(2, { message: Messages.LAST_NAME_TOO_SHORT }),\n  email: z\n    .string()\n    .min(1, { message: Messages.EMAIL_REQUIRED })\n    .email({ message: Messages.INVALID_EMAIL_FORMAT }),\n  password: z\n    .string()\n    .min(1, { message: Messages.PASSWORD_REQUIRED })\n    .min(6, { message: Messages.PASSWORD_TOO_SHORT }),\n  confirmPassword: z\n    .string()\n    .min(1, { message: Messages.CONFIRM_PASSWORD_REQUIRED }),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: Messages.PASSWORD_MISMATCH,\n  path: [\"confirmPassword\"],\n});\n\nexport type RegisterFormData = z.infer<typeof registerSchema>;\n\nexport const validateRegisterForm = (data: Partial<RegisterFormData>) => {\n  try {\n    registerSchema.parse(data);\n    return { success: true, errors: null };\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const formattedErrors = error.errors.reduce((acc, curr) => {\n        const field = curr.path[0] as keyof RegisterFormData;\n        acc[field] = curr.message;\n        return acc;\n      }, {} as Record<keyof RegisterFormData, string>);\n      \n      return { success: false, errors: formattedErrors };\n    }\n    \n    return { \n      success: false, \n      errors: { form: Messages.GENERAL_ERROR } \n    };\n  }\n};\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@modules/auth/context/AuthContext';\nimport { Messages } from '@shared/constants/messages';\nimport { validateRegisterForm, RegisterFormData } from '@modules/auth/config/register.config';\n\nexport const useRegisterForm = () => {\n  const [formData, setFormData] = useState<RegisterFormData>({\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [errors, setErrors] = useState<Partial<Record<keyof RegisterFormData, string>>>({});\n  const [generalError, setGeneralError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const { register } = useAuth();\n  const navigate = useNavigate();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { id, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [id]: value,\n    }));\n    \n    if (errors[id as keyof RegisterFormData]) {\n      setErrors((prev) => ({\n        ...prev,\n        [id]: '',\n      }));\n    }\n    \n    if (generalError) {\n      setGeneralError('');\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setGeneralError('');\n    setIsSubmitting(true);\n    \n    try {\n      const validation = validateRegisterForm(formData);\n      \n      if (!validation.success) {\n        setErrors(validation.errors as Partial<Record<keyof RegisterFormData, string>>);\n        setIsSubmitting(false);\n        return;\n      }\n      \n      const users = JSON.parse(localStorage.getItem('users') || '[]');\n      const userExists = users.some((user: { email: string }) => user.email === formData.email);      \n      if (userExists) {\n        setGeneralError(Messages.USER_EXISTS);\n        setIsSubmitting(false);\n        return;\n      }\n      \n      const fullName = `${formData.firstName} ${formData.lastName}`.trim();\n      \n      const success = register({ \n        id: Date.now().toString(), \n        name: fullName,\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n        email: formData.email, \n        password: formData.password \n      });\n      \n      if (success) {\n        navigate('/login');\n      } else {\n        setGeneralError(Messages.REGISTER_ERROR);\n      }\n    } catch (error) {\n      setGeneralError(Messages.GENERAL_ERROR);\n      console.error(Messages.REGISTER_ERROR, error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const resetForm = () => {\n    setFormData({ firstName: '', lastName: '', email: '', password: '', confirmPassword: '' });\n    setErrors({});\n    setGeneralError('');\n  };\n\n  return {\n    formData,\n    errors,\n    generalError,\n    isSubmitting,\n    handleChange,\n    handleSubmit,\n    resetForm\n  };\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { TextField } from '@shared/components/TextField';\nimport { Button } from '@shared/components/Button';\nimport { useRegisterForm } from '@modules/auth/hooks/useRegisterForm';\n\nexport const Register: React.FC = () => {\n  const {\n    formData,\n    errors,\n    generalError,\n    isSubmitting,\n    handleChange,\n    handleSubmit\n  } = useRegisterForm();\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-secondary-900\">\n      <div className=\"bg-secondary-200 p-8 rounded-lg shadow-md w-full max-w-md mx-4\">        \n        {generalError && (\n          <div className=\"bg-danger-100 border border-danger-400 text-danger-700 px-4 py-3 rounded mb-4\">\n            {generalError}\n          </div>\n        )}\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <TextField\n              type=\"text\"\n              id=\"firstName\"\n              value={formData.firstName}\n              onChange={handleChange}\n              placeholder=\"Seu primeiro nome\"\n              label=\"Nome\"\n              error={errors.firstName}\n            />\n          </div>\n          \n          <div className=\"mb-4\">\n            <TextField\n              type=\"text\"\n              id=\"lastName\"\n              value={formData.lastName}\n              onChange={handleChange}\n              placeholder=\"Seu sobrenome\"\n              label=\"Sobrenome\"\n              error={errors.lastName}\n            />\n          </div>\n          \n          <div className=\"mb-4\">\n            <TextField\n              type=\"email\"\n              id=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              placeholder=\"seu@email.com\"\n              label=\"Email\"\n              error={errors.email}\n            />\n          </div>\n          \n          <div className=\"mb-4\">\n            <TextField\n              type=\"password\"\n              id=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\"********\"\n              label=\"Senha\"\n              error={errors.password}\n            />\n          </div>\n          \n          <div className=\"mb-6\">\n            <TextField\n              type=\"password\"\n              id=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              placeholder=\"********\"\n              label=\"Confirmar Senha\"\n              error={errors.confirmPassword}\n            />\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <Button\n              type=\"submit\"\n              variant=\"primary\"\n              fullWidth\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? 'Cadastrando...' : 'Cadastrar'}\n            </Button>\n          </div>\n          \n          <div className=\"text-center mt-4\">\n            <p className=\"text-sm text-secondary-600\">\n              Já tem uma conta?{' '}\n              <Link to=\"/login\" className=\"text-primary-500 hover:text-primary-700\">\n                Faça login\n              </Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Register } from '@modules/auth/views/RegisterView';\n\nconst RegisterPage: React.FC = () => {\n  return <Register />;\n};\n\nexport default RegisterPage;"],"names":["registerSchema","z","Messages","data","validateRegisterForm","error","acc","curr","field","useRegisterForm","formData","setFormData","useState","errors","setErrors","generalError","setGeneralError","isSubmitting","setIsSubmitting","register","useAuth","navigate","useNavigate","e","id","value","prev","validation","user","fullName","Register","handleChange","handleSubmit","jsxs","jsx","TextField","Button","Link","RegisterPage"],"mappings":"oKAGa,MAAAA,EAAiBC,EAAE,OAAO,CACrC,UAAWA,EACR,OAAA,EACA,IAAI,EAAG,CAAE,QAASC,EAAS,mBAAqB,CAAA,EAChD,IAAI,EAAG,CAAE,QAASA,EAAS,qBAAsB,EACpD,SAAUD,EACP,OAAA,EACA,IAAI,EAAG,CAAE,QAASC,EAAS,kBAAoB,CAAA,EAC/C,IAAI,EAAG,CAAE,QAASA,EAAS,oBAAqB,EACnD,MAAOD,EACJ,OAAA,EACA,IAAI,EAAG,CAAE,QAASC,EAAS,cAAA,CAAgB,EAC3C,MAAM,CAAE,QAASA,EAAS,qBAAsB,EACnD,SAAUD,EACP,OAAA,EACA,IAAI,EAAG,CAAE,QAASC,EAAS,iBAAmB,CAAA,EAC9C,IAAI,EAAG,CAAE,QAASA,EAAS,mBAAoB,EAClD,gBAAiBD,EACd,SACA,IAAI,EAAG,CAAE,QAASC,EAAS,yBAA2B,CAAA,CAC3D,CAAC,EAAE,OAAQC,GAASA,EAAK,WAAaA,EAAK,gBAAiB,CAC1D,QAASD,EAAS,kBAClB,KAAM,CAAC,iBAAiB,CAC1B,CAAC,EAIYE,EAAwBD,GAAoC,CACnE,GAAA,CACF,OAAAH,EAAe,MAAMG,CAAI,EAClB,CAAE,QAAS,GAAM,OAAQ,IAAK,QAC9BE,EAAO,CACV,OAAAA,aAAiBJ,EAAE,SAOd,CAAE,QAAS,GAAO,OANDI,EAAM,OAAO,OAAO,CAACC,EAAKC,IAAS,CACnD,MAAAC,EAAQD,EAAK,KAAK,CAAC,EACrB,OAAAD,EAAAE,CAAK,EAAID,EAAK,QACXD,CACT,EAAG,EAA4C,CAEE,EAG5C,CACL,QAAS,GACT,OAAQ,CAAE,KAAMJ,EAAS,aAAc,CACzC,CAAA,CAEJ,EC5CaO,EAAkB,IAAM,CACnC,KAAM,CAACC,EAAUC,CAAW,EAAIC,WAA2B,CACzD,UAAW,GACX,SAAU,GACV,MAAO,GACP,SAAU,GACV,gBAAiB,EAAA,CAClB,EACK,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAA0D,CAAA,CAAE,EAClF,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAS,EAAE,EAC7C,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAK,EAEhD,CAAE,SAAAO,CAAS,EAAIC,EAAQ,EACvBC,EAAWC,EAAY,EAyEtB,MAAA,CACL,SAAAZ,EACA,OAAAG,EACA,aAAAE,EACA,aAAAE,EACA,aA5EoBM,GAA2C,CAC/D,KAAM,CAAE,GAAAC,EAAI,MAAAC,CAAM,EAAIF,EAAE,OACxBZ,EAAae,IAAU,CACrB,GAAGA,EACH,CAACF,CAAE,EAAGC,CAAA,EACN,EAEEZ,EAAOW,CAA4B,GACrCV,EAAWY,IAAU,CACnB,GAAGA,EACH,CAACF,CAAE,EAAG,EAAA,EACN,EAGAT,GACFC,EAAgB,EAAE,CAEtB,EA4DE,aA1DmB,MAAOO,GAAuB,CACjDA,EAAE,eAAe,EACjBP,EAAgB,EAAE,EAClBE,EAAgB,EAAI,EAEhB,GAAA,CACI,MAAAS,EAAavB,EAAqBM,CAAQ,EAE5C,GAAA,CAACiB,EAAW,QAAS,CACvBb,EAAUa,EAAW,MAAyD,EAC9ET,EAAgB,EAAK,EACrB,MAAA,CAKF,GAFc,KAAK,MAAM,aAAa,QAAQ,OAAO,GAAK,IAAI,EACrC,KAAMU,GAA4BA,EAAK,QAAUlB,EAAS,KAAK,EACxE,CACdM,EAAgBd,EAAS,WAAW,EACpCgB,EAAgB,EAAK,EACrB,MAAA,CAGI,MAAAW,EAAW,GAAGnB,EAAS,SAAS,IAAIA,EAAS,QAAQ,GAAG,KAAK,EAEnDS,EAAS,CACvB,GAAI,KAAK,IAAI,EAAE,SAAS,EACxB,KAAMU,EACN,UAAWnB,EAAS,UACpB,SAAUA,EAAS,SACnB,MAAOA,EAAS,MAChB,SAAUA,EAAS,QAAA,CACpB,EAGCW,EAAS,QAAQ,EAEjBL,EAAgBd,EAAS,cAAc,QAElCG,EAAO,CACdW,EAAgBd,EAAS,aAAa,EAC9B,QAAA,MAAMA,EAAS,eAAgBG,CAAK,CAAA,QAC5C,CACAa,EAAgB,EAAK,CAAA,CAEzB,EAeE,UAbgB,IAAM,CACVP,EAAA,CAAE,UAAW,GAAI,SAAU,GAAI,MAAO,GAAI,SAAU,GAAI,gBAAiB,EAAA,CAAI,EACzFG,EAAU,CAAA,CAAE,EACZE,EAAgB,EAAE,CACpB,CAUA,CACF,EC/Fac,EAAqB,IAAM,CAChC,KAAA,CACJ,SAAApB,EACA,OAAAG,EACA,aAAAE,EACA,aAAAE,EACA,aAAAc,EACA,aAAAC,GACEvB,EAAgB,EAEpB,aACG,MAAI,CAAA,UAAU,iEACb,SAACwB,EAAA,KAAA,MAAA,CAAI,UAAU,iEACZ,SAAA,CAAAlB,GACEmB,EAAA,IAAA,MAAA,CAAI,UAAU,gFACZ,SACHnB,EAAA,EAGFkB,EAAAA,KAAC,OAAK,CAAA,SAAUD,EACd,SAAA,CAACE,EAAAA,IAAA,MAAA,CAAI,UAAU,OACb,SAAAA,EAAA,IAACC,EAAA,CACC,KAAK,OACL,GAAG,YACH,MAAOzB,EAAS,UAChB,SAAUqB,EACV,YAAY,oBACZ,MAAM,OACN,MAAOlB,EAAO,SAAA,CAAA,EAElB,EAEAqB,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAACC,EAAA,CACC,KAAK,OACL,GAAG,WACH,MAAOzB,EAAS,SAChB,SAAUqB,EACV,YAAY,gBACZ,MAAM,YACN,MAAOlB,EAAO,QAAA,CAAA,EAElB,EAEAqB,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAACC,EAAA,CACC,KAAK,QACL,GAAG,QACH,MAAOzB,EAAS,MAChB,SAAUqB,EACV,YAAY,gBACZ,MAAM,QACN,MAAOlB,EAAO,KAAA,CAAA,EAElB,EAEAqB,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAACC,EAAA,CACC,KAAK,WACL,GAAG,WACH,MAAOzB,EAAS,SAChB,SAAUqB,EACV,YAAY,WACZ,MAAM,QACN,MAAOlB,EAAO,QAAA,CAAA,EAElB,EAEAqB,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAACC,EAAA,CACC,KAAK,WACL,GAAG,kBACH,MAAOzB,EAAS,gBAChB,SAAUqB,EACV,YAAY,WACZ,MAAM,kBACN,MAAOlB,EAAO,eAAA,CAAA,EAElB,EAEAqB,EAAAA,IAAC,MAAI,CAAA,UAAU,oCACb,SAAAA,EAAA,IAACE,EAAA,CACC,KAAK,SACL,QAAQ,UACR,UAAS,GACT,SAAUnB,EAET,WAAe,iBAAmB,WAAA,CAAA,EAEvC,QAEC,MAAI,CAAA,UAAU,mBACb,SAACgB,EAAA,KAAA,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,oBACtB,UACjBI,EAAK,CAAA,GAAG,SAAS,UAAU,0CAA0C,SAEtE,YAAA,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,EC1GMC,EAAyB,UACrBR,EAAS,EAAA"}