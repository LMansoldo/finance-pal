import{r as c,u as b,a as j,j as e,L as S}from"./index-DyRn_gV8.js";import{z as m,M as i,T as x,B as v}from"./index-CjEUsjhm.js";const R=m.object({email:m.string().min(1,{message:i.EMAIL_REQUIRED}).email({message:i.INVALID_EMAIL_FORMAT}),password:m.string().min(1,{message:i.PASSWORD_REQUIRED}).min(6,{message:i.PASSWORD_TOO_SHORT})}),N=s=>{try{return R.parse(s),{success:!0,errors:null}}catch(a){return a instanceof m.ZodError?{success:!1,errors:a.errors.reduce((r,n)=>{const t=n.path[0];return r[t]=n.message,r},{})}:{success:!1,errors:{form:i.GENERAL_ERROR}}}},L=()=>{const[s,a]=c.useState({email:"",password:""}),[l,r]=c.useState({}),[n,t]=c.useState(""),[f,h]=c.useState(!1),{login:p}=b(),E=j();return{formData:s,errors:l,generalError:n,isSubmitting:f,handleChange:d=>{const{id:o,value:g}=d.target;a(u=>({...u,[o]:g})),l[o]&&r(u=>({...u,[o]:""})),n&&t("")},handleSubmit:async d=>{d.preventDefault(),t(""),h(!0);try{const o=N(s);if(!o.success){r(o.errors||{});return}p(s.email,s.password)?E("/"):t(i.INVALID_CREDENTIALS)}catch(o){t(i.LOGIN_ERROR),console.error("Login error:",o)}finally{h(!1)}},resetForm:()=>{a({email:"",password:""}),r({}),t("")}}},w=()=>{const{formData:s,errors:a,generalError:l,isSubmitting:r,handleChange:n,handleSubmit:t}=L();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-900",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[l&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),e.jsxs("form",{onSubmit:t,children:[e.jsx("div",{className:"mb-4",children:e.jsx(x,{type:"email",id:"email",value:s.email,onChange:n,placeholder:"seu@email.com",label:"Email",error:a.email})}),e.jsx("div",{className:"mb-6",children:e.jsx(x,{type:"password",id:"password",value:s.password,onChange:n,placeholder:"********",label:"Senha",error:a.password})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(v,{type:"submit",variant:"primary",fullWidth:!0,disabled:r,children:r?"Entrando...":"Entrar"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-secondary-600",children:["NÃ£o tem uma conta?"," ",e.jsx(S,{to:"/register",className:"text-blue-500 hover:text-blue-700",children:"Cadastre-se"})]})})]})]})})},_=()=>e.jsx(w,{});export{_ as default};
