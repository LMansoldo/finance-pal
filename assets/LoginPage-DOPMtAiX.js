import{M as i,u as b,j as e}from"./index-BWo5rQTf.js";import{T as x,B as R}from"./Button-BUNh9_-d.js";import{z as c,b as m,u as j,L as S}from"./vendor-XtUg-c2N.js";const v=c.object({email:c.string().min(1,{message:i.EMAIL_REQUIRED}).email({message:i.INVALID_EMAIL_FORMAT}),password:c.string().min(1,{message:i.PASSWORD_REQUIRED}).min(6,{message:i.PASSWORD_TOO_SHORT})}),N=s=>{try{return v.parse(s),{success:!0,errors:null}}catch(t){return t instanceof c.ZodError?{success:!1,errors:t.errors.reduce((r,n)=>{const a=n.path[0];return r[a]=n.message,r},{})}:{success:!1,errors:{form:i.GENERAL_ERROR}}}},y=()=>{const[s,t]=m.useState({email:"",password:""}),[l,r]=m.useState({}),[n,a]=m.useState(""),[f,g]=m.useState(!1),{login:p}=b(),E=j();return{formData:s,errors:l,generalError:n,isSubmitting:f,handleChange:d=>{const{id:o,value:h}=d.target;t(u=>({...u,[o]:h})),l[o]&&r(u=>({...u,[o]:""})),n&&a("")},handleSubmit:async d=>{d.preventDefault(),a(""),g(!0);try{const o=N(s);if(!o.success){r(o.errors||{});return}p(s.email,s.password)?E("/"):a(i.INVALID_CREDENTIALS)}catch(o){a(i.LOGIN_ERROR),console.error(i.LOGIN_ERROR,o)}finally{g(!1)}},resetForm:()=>{t({email:"",password:""}),r({}),a("")}}},L=()=>{const{formData:s,errors:t,generalError:l,isSubmitting:r,handleChange:n,handleSubmit:a}=y();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-900",children:e.jsxs("div",{className:"bg-secondary-200 p-8 rounded-lg shadow-md w-full max-w-md mx-4",children:[l&&e.jsx("div",{className:"bg-danger-100 border border-danger-400 text-danger-700 px-4 py-3 rounded mb-4",children:l}),e.jsxs("form",{onSubmit:a,children:[e.jsx("div",{className:"mb-4",children:e.jsx(x,{type:"email",id:"email",value:s.email,onChange:n,placeholder:"seu@email.com",label:"Email",error:t.email})}),e.jsx("div",{className:"mb-6",children:e.jsx(x,{type:"password",id:"password",value:s.password,onChange:n,placeholder:"********",label:"Senha",error:t.password})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(R,{type:"submit",variant:"primary",fullWidth:!0,disabled:r,children:r?"Entrando...":"Entrar"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-secondary-600",children:["NÃ£o tem uma conta?"," ",e.jsx(S,{to:"/register",className:"text-primary-500 hover:text-primary-700",children:"Cadastre-se"})]})})]})]})})},C=()=>e.jsx(L,{});export{C as default};
